#!/bin/bash

# Assigns the given domain name variable $1 to domain.
domain=$1

rawWhois=$(whois -H "$domain")

# Runs several dig queries and assigns the results to variables.
function digParser() {
	dig_a=$(dig +noall +answer $domain a | grep "A" | awk '{$1=$2=$3=""; print $0}')
	dig_mx=$(dig +noall +answer $domain mx | grep "MX" | awk '{$1=$2=$3=""; print $0}')
}	

# Runs several whois queries and assigns the results to variables.
function whoisTool() {
    whoisNS=$(echo "$rawWhois" | grep -m 2 "Name Server")
    whoisRegistrar=$(echo "$rawWhois" | grep -m 1 "Registrar:")
    whoisRegistrant=$(echo "$rawWhois" | grep -m 1 "Registrant")
    whoisReseller=$(echo "$rawWhois" | grep -m 1 "Reseller:")
    whoisExpDate=$(echo "$rawWhois" | grep -m 1 "Expiration")
 }

echo ''

echo 'Dig Results:'
# Prints dig variables.
digParser
echo $domain $dig_a
echo $domain $dig_mx

echo ''

echo 'Whois Results:'
# Prints whois variables.
whoisTool
echo $whoisNS
echo $whoisRegistrar
echo $whoisRegistrant
echo $whoisReseller
echo $whoisExpDate

echo ''
